/*!
 * Notification.js
 *
 * A well designed, highly customizable and lightweigth notification library.
 *
 * @author 	   Dominique Müller <dominique.m.mueller@gmail.com>
 * @copyright  Dominique Müller 2015
 * @license    MIT <http://opensource.org/licenses/MIT>
 * @link 	   Github <https://github.com/dominique-mueller/notification-js>
 * @version    1.0.0
 */
!function(a,b,c){"use strict";!function(a){function d(a,d){d=d||{bubbles:!1,cancelable:!1,detail:c};var e=b.createEvent("CustomEvent");return e.initCustomEvent(a,d.bubbles,d.cancelable,d.detail),e}d.prototype=a.Event.prototype,a.CustomEvent=d}(a);var d={global:{notification:{position:["left","bottom"],distances:[20,20,10],height:60,roundCorners:[1,1,1,1],color:"#555"},symbol:{visible:!1,resource:!1,roundCorners:!1,color:"rgba(0,0,0,.1)"},message:{visible:!0,color:"#FFF",textSize:14},dismiss:{visible:!0,color:"#FFF",text:!1},behaviour:{autoHide:5,onMouseover:"pause",stacking:!0,limit:!0,htmlMode:!1},animations:{enabled:!0,duration:[.75,.75],easing:["ease","ease"]},callbacks:{onOpen:!1,onOpened:!1,onClose:!1,onClosed:!1,onDismiss:!1,onMouseenter:!1,onMouseleave:!1}},default:{notification:{color:"#555"}},info:{notification:{color:"#2574A9"}},success:{notification:{color:"#239D58"},symbol:{visible:!0}},error:{notification:{color:"#B9493E"},symbol:{visible:!0}},warning:{notification:{color:"#C7932F"}}},e=function(){var a=b.createElementNS("http://www.w3.org/2000/svg","svg"),c=b.createElementNS("http://www.w3.org/2000/svg","polyline");return a.setAttributeNS(null,"viewBox","0 0 24 24"),c.setAttributeNS(null,"points","4,12.5 9,17.5 20,6.5"),c.setAttributeNS(null,"fill","none"),c.setAttributeNS(null,"stroke-width","2"),c.setAttributeNS(null,"stroke","#FFF"),c.setAttributeNS(null,"stroke-dasharray","23"),a.appendChild(c),a},f=function(){var a=b.createElementNS("http://www.w3.org/2000/svg","svg"),c=b.createElementNS("http://www.w3.org/2000/svg","line"),d=b.createElementNS("http://www.w3.org/2000/svg","line");return a.setAttributeNS(null,"viewBox","0 0 24 24"),c.setAttributeNS(null,"x1","6"),c.setAttributeNS(null,"y1","6"),c.setAttributeNS(null,"x2","18"),c.setAttributeNS(null,"y2","18"),c.setAttributeNS(null,"stroke-width","2"),c.setAttributeNS(null,"stroke","#FFF"),c.setAttributeNS(null,"stroke-dasharray","17"),d.setAttributeNS(null,"x1","6"),d.setAttributeNS(null,"y1","18"),d.setAttributeNS(null,"x2","18"),d.setAttributeNS(null,"y2","6"),d.setAttributeNS(null,"stroke-width","2"),d.setAttributeNS(null,"stroke","#FFF"),d.setAttributeNS(null,"stroke-dasharray","17"),a.appendChild(c),a.appendChild(d),a},g=function(a,b,c){this.profile="undefined"!=typeof d[a]?a:"default",this.message=b,this.options="undefined"!=typeof c?c:{},this.$components={},this.initialize()};g.instances=[],g.prototype.EVENTS={onOpen:new CustomEvent("notification.open"),onOpened:new CustomEvent("notification.opened"),onClose:new CustomEvent("notification.close"),onClosed:new CustomEvent("notification.closed"),onDismiss:new CustomEvent("notification.dismiss"),onMouseenter:new CustomEvent("notification.mouseenter"),onMouseleave:new CustomEvent("notification.mouseleave")},g.prototype.initialize=function(){function a(){for(var a=arguments.length,b={},c=a-1;c>0;c--)"undefined"==typeof arguments[c]&&delete arguments[c];for(var d in arguments[0])for(var e=a-1;e>=0;e--)if("undefined"!=typeof arguments[e]&&arguments[e].hasOwnProperty(d)){b[d]=arguments[e][d];break}return b}var b=this,c={};for(var e in d.global)c[e]=a(d.global[e],d[b.profile][e],b.options[e]);c.symbol.resource||"success"===b.profile||"error"===b.profile||(c.symbol.visible=!1),b.options=c},g.prototype.build=function(a){function c(){var a=b.createElement("div"),c=b.createElement("div"),d=j.position[0],e=j.position[1],f=j.distances[0],g=j.distances[1],h=j.height,k=j.roundCorners,l=j.color;switch(d){case"left":a.style.left=f+"px";break;case"right":a.style.right=f+"px";break;case"middle":a.style.left="50%",a.style.webkitTransform="translateX(-50%)",a.style.transform="translateX(-50%)"}switch(e){case"top":a.style.top=g+"px";break;case"bottom":a.style.bottom=g+"px"}return a.style.height=h+"px",k&&k[0]+k[1]+k[2]+k[3]>0&&(a.style.borderRadius=k[0]+"px "+k[1]+"px "+k[2]+"px "+k[3]+"px"),c.style.left="calc(-100% + "+h/2+"px)",c.style.backgroundColor=l,a.classList.add("notification"),a.classList.add("notification-"+i.profile),c.classList.add("notification-background"),a.appendChild(c),i.$components.background=c,a}function d(){var a,c=j.height,d=k.resource,g=k.roundCorners,h=k.color;if(d&&"function"!=typeof d)a=b.createElement("div"),a.style.backgroundImage='url("'+d+'")',a.style.backgroundPosition="center",a.style.backgroundSize="cover",a.style.backgroundRepeat="no-repeat",g&&g[0]+g[1]+g[2]+g[3]>0?(a.style.height=c-10+"px",a.style.width=c-10+"px",a.style.margin="5px",a.style.borderRadius=g[0]+"px "+g[1]+"px "+g[2]+"px "+g[3]+"px"):(a.style.height=c+"px",a.style.width=c+"px");else{if(d){if(a=d(),"undefined"==typeof a||"svg"!==a.nodeName.toLowerCase())throw new Error("The custom notification symbol is not a valid svg element.")}else switch(i.profile){case"success":a=e();break;case"error":a=f()}a.setAttributeNS(null,"width","24"),a.setAttributeNS(null,"size","24"),g&&g[0]+g[1]+g[2]+g[3]>0?(a.style.height=c-10+"px",a.style.width=c-10+"px",a.style.padding=c/2-17+"px",a.style.margin="5px",a.style.borderRadius=g[0]+"px "+g[1]+"px "+g[2]+"px "+g[3]+"px"):(a.style.height=c+"px",a.style.width=c+"px",a.style.padding=c/2-12+"px")}return h&&(a.style.backgroundColor=h),i.options.animations.enabled&&!d?a.setAttributeNS(null,"class","notification-symbol notification-symbol-"+i.profile):a.setAttributeNS(null,"class","notification-symbol"),a}function g(){var a=b.createElement("p"),c=l.color,d=j.height,e=l.textSize,f=Math.round(j.height/2.75);return i.options.behaviour.htmlMode?a.innerHTML=i.message:a.textContent=i.message,a.style.color=c,a.style.fontSize=e+"px",a.style.lineHeight=d+"px",a.style.paddingLeft=f+"px",a.style.paddingRight=f+"px",a.classList.add("notification-message"),a}function h(){var a=b.createElement("button"),c=j.height,d=m.text,e=m.color;if(a.setAttribute("type","button"),a.setAttribute("title","Dismiss this notification"),a.style.height=c-20+"px",a.style.padding=c/2-18+"px",d)a.appendChild(b.createTextNode(d)),a.style.color=e,a.style.lineHeight="16px";else{var g=f();g.setAttributeNS(null,"width","16"),g.setAttributeNS(null,"height","16"),a.appendChild(g),a.style.width=c-20+"px"}return a.classList.add("notification-btn"),a}var i=this,j=i.options.notification,k=i.options.symbol,l=i.options.message,m=i.options.dismiss,n=c();if(i.$components.notification=n,k.visible){var o=d();n.appendChild(o),i.$components.symbol=o}if(l.visible){var p=g();n.appendChild(p),i.$components.message=p}if(m.visible){var q=h();n.appendChild(q),i.$components.button=q}var r=b.createDocumentFragment();r.appendChild(n),b.body.appendChild(r),i.next(a)},g.prototype.prepare=function(b){var c=this;if(g.instances.length)if(c.options.behaviour.stacking){var d,e=c.options.behaviour.limit,f=g.instances.length;if(e===!0||0>e){var h=c.options.notification,i=h.height,j=h.distances[1],k=h.distances[2],l=(e===!0?f:f-e)+1,m=2*j+l*i+l*k;d=m>a.innerHeight?!0:!1}else d=e!==!1&&0!==e&&f===e?!0:!1;d?g.instances[0].close(function(){c.shift(g.instances,"up",function(){c.next(b)})}):c.shift(g.instances,"up",function(){c.next(b)})}else g.instances[0].close(function(){c.next(b)});else c.next(b)},g.prototype.open=function(a){var c=this;g.instances.push(c),b.dispatchEvent(c.EVENTS.onOpen),"function"==typeof c.options.callbacks.onOpen&&c.options.callbacks.onOpen(),c.animate("in",function(){b.dispatchEvent(c.EVENTS.onOpened),"function"==typeof c.options.callbacks.onOpened&&c.options.callbacks.onOpened(),c.next(a)})},g.prototype.wait=function(a){var c=this;if(c.options.behaviour.autoHide){var d=new h(1e3*c.options.behaviour.autoHide,function(){c.next(a)});c.options.behaviour.onMouseover&&(c.$components.notification.addEventListener("mouseenter",function(){switch(b.dispatchEvent(c.EVENTS.onMouseenter),"function"==typeof c.options.callbacks.onMouseenter&&c.options.callbacks.onMouseenter(),c.options.behaviour.onMouseover){case"pause":d.pause();break;case"reset":d.stop()}}),c.$components.notification.addEventListener("mouseleave",function(){b.dispatchEvent(c.EVENTS.onMouseleave),"function"==typeof c.options.callbacks.onMouseleave&&c.options.callbacks.onMouseleave(),d.resume()}))}c.options.dismiss.visible&&c.$components.button.addEventListener("click",function e(f){f.target.removeEventListener(f.type,e),b.dispatchEvent(c.EVENTS.onDismiss),"function"==typeof c.options.callbacks.onDismiss&&c.options.callbacks.onDismiss(),c.options.behaviour.autoHide&&d.stop(),c.next(a)})},g.prototype.close=function(a){var c=this;b.dispatchEvent(c.EVENTS.onClose),"function"==typeof c.options.callbacks.onClose&&c.options.callbacks.onClose(),c.animate("out",function(){if(b.dispatchEvent(c.EVENTS.onClosed),"function"==typeof c.options.callbacks.onClosed&&c.options.callbacks.onClosed(),b.body.removeChild(c.$components.notification),c.options.behaviour.stacking&&g.instances.length-1){var d=g.instances.indexOf(c);c.shift(g.instances.slice(0,d),"down",function(){g.instances.splice(d,1),c.next(a)})}else g.instances=[],c.next(a)})},g.prototype.animate=function(a,b){function c(){d.$components.notification.offsetWidth}var d=this,e=d.options.animations.duration,f=d.options.animations.easing;switch(a){case"in":d.options.animations.enabled&&(d.$components.notification.style.transition="box-shadow "+e[0]/1.5+"s "+f[0]+" "+e[0]/1.5+"s, opacity "+e[0]+"s "+f[0],d.$components.background.style.transition="transform "+e[0]+"s "+f[0],d.options.symbol.visible&&(d.$components.symbol.style.transition="opacity "+e[0]+"s "+f[0]),d.options.message.visible&&(d.$components.message.style.transition="transform "+e[0]+"s "+f[0]+", opacity "+e[0]+"s "+f[0]),d.options.dismiss.visible&&(d.$components.button.style.transition="opacity "+e[0]/1.5+"s "+f[0]+" "+e[0]/1.5+"s")),c(),d.$components.notification.classList.add("is-visible");break;case"out":d.options.animations.enabled&&(d.$components.notification.style.transition="box-shadow "+e[1]+"s "+f[1]+", opacity "+e[1]+"s "+f[1],d.$components.background.style.transition="transform 0s linear "+e[1]+"s",d.options.symbol.visible&&(d.$components.symbol.style.transition="opacity 0s linear "+e[1]+"s"),d.options.message.visible&&(d.$components.message.style.transition="transform 0s linear "+e[1]+"s, opacity 0s linear "+e[1]+"s"),d.options.dismiss.visible&&(d.$components.button.style.transition="opacity 0s linear "+e[1]+"s")),c(),d.$components.notification.classList.remove("is-visible")}d.options.animations.enabled?d.$components.notification.addEventListener("transitionend",function a(){d.$components.notification.removeEventListener("transitionend",a),d.next(b)}):d.next(b)},g.prototype.shift=function(a,b,c){function d(){var a=h.options.animations,b=a.enabled?(new Date-i)/(1e3*a.duration[0]/1.5):1;1>b?(e(f(b)),requestAnimationFrame(d)):(e(1),h.next(c))}function e(a){for(var c,d,e=j-1;e>=0;e--)c=n*(k-1-e+a*("up"===b?1:-1)),d="translate("+l+", "+m+c+"px)",g.instances[e].$components.notification.style.webkitTransform=d,g.instances[e].$components.notification.style.transform=d}function f(a){return.5>a?2*a*a:-1+(4-2*a)*a}var h=this;if(a.length){var i=new Date,j=a.length,k=g.instances.length,l="middle"===h.options.notification.position[0]?"-50%":"0",m="top"===h.options.notification.position[1]?"+":"-",n=h.options.notification.height+h.options.notification.distances[2];requestAnimationFrame(d)}else h.next(c)},g.prototype.next=function(a){"function"==typeof a&&a()};var h=function(a,b){this.duration=a,this.remaining=a,this.callback=b,this.resume()};h.prototype.resume=function(){this.now=new Date,this.timerId=a.setTimeout(this.callback,this.remaining)},h.prototype.pause=function(){a.clearTimeout(this.timerId),this.remaining-=new Date-this.now},h.prototype.stop=function(){a.clearTimeout(this.timerId),this.remaining=this.duration};var i={notify:function(a,b,c){var d=new g(a,b,c);d.prepare(function(){d.build(function(){d.open(function(){d.wait(function(){d.close()})})})})},on:function(a,c){b.addEventListener("notification."+a,c)},off:function(a,c){b.removeEventListener("notification."+a,c)},clearAll:function(a){function b(a){setTimeout(function(){g.instances[a].close()},a*c*1e3)}for(var c="undefined"==typeof a?.15:a,d=g.instances.length,e=d-1;e>=0;e--)c?b(e):g.instances[e].close()},configProfile:function(a,b){if(!d.hasOwnProperty(a))throw new Error("A notification profile with the name <"+a+"> does not exist.");if("undefined"==typeof b)throw new Error("Configuring a profile requires an options object.");for(var c in b){d[a].hasOwnProperty(c)||(d[a][c]={});for(var e in b[c])d[a][c][e]=b[c][e]}},addProfile:function(a,b){if(d.hasOwnProperty(a))throw new Error("A notification profile with the name <"+a+"> already exists.");d[a]="undefined"!=typeof b?b:{}},removeProfile:function(a){if(!d.hasOwnProperty(a))throw new Error("A notification profile with the name <"+a+"> does not exist.");if(-1!==["global","default","info","success","error","warning"].indexOf(a))throw new Error("You cannot delete the <"+a+"> profile.");delete d[a]}};a.notification?console.warn("Global notification object already defined."):a.notification=i}(this,this.document);